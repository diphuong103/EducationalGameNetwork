<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<?import java.lang.String?>
<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.edugame.client.controller.FriendsController"
            prefWidth="1000" prefHeight="700"
            styleClass="friends-root"
            stylesheets="@../css/friends.css , @../css/common.css">

    <!-- HEADER -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="10" styleClass="friends-header">
            <padding>
                <Insets top="15" bottom="15" left="20" right="20"/>
            </padding>

            <Button text="â† Quay láº¡i" styleClass="back-button" onAction="#handleBack"/>

            <Region HBox.hgrow="ALWAYS"/>

            <Text text="ðŸ‘¥ Quáº£n LÃ½ Báº¡n BÃ¨" styleClass="friends-title"/>

            <Region HBox.hgrow="ALWAYS"/>
        </HBox>
    </top>

    <!-- MAIN CONTENT -->
    <center>
        <VBox spacing="15">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>

            <!-- Tabs -->
            <HBox spacing="10">
                <ToggleButton fx:id="friendsListTab" text="ðŸ“‹ Báº¡n BÃ¨" selected="true"
                              styleClass="tab-button" onAction="#showFriendsTab"/>
                <ToggleButton fx:id="pendingRequestsTab" text="ðŸ“¬ Lá»i Má»i Káº¿t Báº¡n"
                              styleClass="tab-button" onAction="#showPendingRequestsTab"/>
                <ToggleButton fx:id="searchFriendsTab" text="ðŸ” TÃ¬m Kiáº¿m Báº¡n BÃ¨"
                              styleClass="tab-button" onAction="#showSearchTab"/>
            </HBox>

            <!-- TAB 1: DANH SÃCH Báº N BÃˆ -->
            <VBox fx:id="friendsListContent" spacing="15" VBox.vgrow="ALWAYS">
                <!-- Search Field for Friends List -->
                <TextField fx:id="searchFriendsField" promptText="ðŸ” TÃ¬m kiáº¿m trong danh sÃ¡ch báº¡n bÃ¨..."
                           styleClass="search-field"/>

                <!-- Friends Count -->
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Text fx:id="friendsCountText" text="Tá»•ng sá»‘ báº¡n bÃ¨: 0" styleClass="friends-count"/>
                </HBox>

                <!-- Friends List -->
                <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" styleClass="friends-scroll">
                    <FlowPane fx:id="friendsContainer" hgap="20" vgap="20" styleClass="friends-container">
                        <padding>
                            <Insets top="10" right="10" bottom="10" left="10"/>
                        </padding>
                    </FlowPane>
                </ScrollPane>
            </VBox>

            <!-- TAB 2: Lá»œI Má»œI Káº¾T Báº N -->
            <VBox fx:id="pendingRequestsContent" spacing="15" VBox.vgrow="ALWAYS" visible="false" managed="false">
                <!-- Pending Requests Count -->
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Text fx:id="pendingRequestsCountText" text="Lá»i má»i káº¿t báº¡n: 0" styleClass="friends-count"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="ðŸ”„ LÃ m má»›i" onAction="#handleRefreshPendingRequests"
                            styleClass="refresh-button"/>
                </HBox>

                <!-- Info Text -->
                <VBox spacing="5" styleClass="info-box">
                    <Text text="ðŸ’¡ Máº¹o:" styleClass="info-title"/>
                    <Text text="â€¢ Cháº¥p nháº­n lá»i má»i Ä‘á»ƒ thÃªm báº¡n má»›i vÃ o danh sÃ¡ch"
                          styleClass="info-text"/>
                    <Text text="â€¢ Tá»« chá»‘i náº¿u báº¡n khÃ´ng muá»‘n káº¿t báº¡n vá»›i ngÆ°á»i nÃ y"
                          styleClass="info-text"/>
                </VBox>

                <!-- Pending Requests List -->
                <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" styleClass="friends-scroll">
                    <FlowPane fx:id="pendingRequestsContainer" hgap="20" vgap="20" styleClass="friends-container">
                        <padding>
                            <Insets top="10" right="10" bottom="10" left="10"/>
                        </padding>
                    </FlowPane>
                </ScrollPane>
            </VBox>

            <!-- TAB 3: TÃŒM KIáº¾M Báº N BÃˆ -->
            <VBox fx:id="searchFriendsContent" spacing="15" VBox.vgrow="ALWAYS" visible="false" managed="false">
                <!-- Search Input -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <TextField fx:id="searchNewFriendsField" promptText="Nháº­p tÃªn hoáº·c username..."
                               styleClass="search-field" HBox.hgrow="ALWAYS"/>
                    <Button text="TÃ¬m kiáº¿m" onAction="#handleSearchNewFriends"
                            styleClass="search-button"/>
                </HBox>

                <!-- Filters -->
                <VBox spacing="10" styleClass="filter-container">
                    <Text text="Bá»™ lá»c tÃ¬m kiáº¿m:" styleClass="filter-title"/>

                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <VBox spacing="5">
                            <Text text="Äá»™ tuá»•i:" styleClass="filter-label"/>
                            <ComboBox fx:id="ageFilter" promptText="Chá»n Ä‘á»™ tuá»•i"
                                      styleClass="filter-combo" prefWidth="200">
                                <items>
                                    <javafx.collections.FXCollections fx:factory="observableArrayList">
                                        <String fx:value="Táº¥t cáº£"/>
                                        <String fx:value="7"/>
                                        <String fx:value="8"/>
                                        <String fx:value="9"/>
                                        <String fx:value="10"/>
                                        <String fx:value="11"/>
                                        <String fx:value="12"/>
                                    </javafx.collections.FXCollections>
                                </items>
                            </ComboBox>
                        </VBox>

                        <Button text="Ãp dá»¥ng" onAction="#handleApplyFilters"
                                styleClass="filter-apply-button"/>
                        <Button text="Äáº·t láº¡i" onAction="#handleResetFilters"
                                styleClass="filter-reset-button"/>
                    </HBox>
                </VBox>

                <!-- Search Results -->
                <VBox spacing="10">
                    <Text fx:id="searchResultsText" text="Káº¿t quáº£ tÃ¬m kiáº¿m sáº½ hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y"
                          styleClass="search-results-text"/>
                </VBox>

                <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" styleClass="friends-scroll">
                    <FlowPane fx:id="searchResultsContainer" hgap="20" vgap="20" styleClass="friends-container">
                        <padding>
                            <Insets top="10" right="10" bottom="10" left="10"/>
                        </padding>
                    </FlowPane>
                </ScrollPane>
            </VBox>

        </VBox>
    </center>

</BorderPane>
